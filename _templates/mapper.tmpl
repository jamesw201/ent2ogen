{{ define "mappers" }}
{{ template "header" . }}

{{- $extCfg := $.Config.Annotations.Ent2ogen }}

import openapi "{{ $extCfg.OgenPackage }}"

{{- range $m := $extCfg.Mappings }}

{{- $rtype := sprintf "openapi.%s" $m.From.Name }}
func (e *{{ $m.From.Name }}) ToOpenAPI() (t {{ $rtype }}) {
    {{- range $f := $m.EntFields }}{{- if $m.HasOpenAPIField $f }}

    {{- if $f.Nillable }}
    if e.{{ $f.StructField }} != nil {
        t.{{ $f.StructField }}.SetTo(*e.{{ $f.StructField }})
    }
    {{- else }}
    t.{{ $f.StructField }} = e.{{ $f.StructField }}
    {{- end }}
    
    {{- end }}{{- end }}
    return t
}

{{- end }}
{{- end }}